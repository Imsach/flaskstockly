{% extends 'base2.html' %}
{% block content %}
<title>FlaskStockly</title>
        <div id="container" style="margin-top: 100px">
          <div>
            {% if isApiDemo %}
              <center><h3>__Api key is set to 'demo'; App may not work as expected__</h3></center><br>
            {% else %}
              <center><h5>__(o).(o)__</h5></center><br>
            {% endif %}
          </div>
        <div id="loading2"><h1 style="text-align:center">Hang on tight! We are mathing...</h1></div>
        <div id="loading3"><h2 style="text-align:center">Hang on tight! click on view dashboard if it's loading forever...</h2></div>
        <h4>
            <p style="text-align:center">
              <button id="trending-stocks" type="button">Trending Stocks</button>
              <button id="run-spy-500" type="button">Run SPY 500</button>
              <button id="view-dashboard" type="button">View Dashboard</button>
            </p>
        <p style="text-align:center">[ The RUN script efficiently retrieves all stock data from the API, utilizing Python code. ]<br>
              With its optimized 13-second interval, it seamlessly adds a random stock from the SPY500 list.
              <br>[ (Note: the API allows for 5 free requests per minute) ]</p></h4>
        
        <p style="text-align:center">
            <input id="txt" name="addstock" type="text" maxlength="5" size="7" >
            <button id="add-stock" type="button">=Add Stock=</button>
            <button id="view-stock" type="button" title="View Stock News, Institution Holders, Charts, etc.">=$tock dashboard=</button>
          </p>
        <h5><p style="text-align:center">Organize and streamline your stock information with our user-friendly web application. With data gathered from the API and SPY500 list
          <br>[ As well as the option to manually add stocks through the '/anystock' page (e.g. http://{{ ip }}/TSLA), ]
          <br> you have the flexibility to track the stocks that matter most to you. Conveniently run locally at {{ ip }}
          <br> Stay on top of the latest market trends with ease. :) </p></h5> 
        </div>

    {% block scripts %} 
    
    <script>
        const trendingStocksButton = document.getElementById("trending-stocks");
        const runSpy500Button = document.getElementById("run-spy-500");
        const viewDashboardButton = document.getElementById("view-dashboard");
        const addStockButton = document.getElementById("add-stock");
        const viewStockButton = document.getElementById("view-stock");
        const input = document.getElementById("txt");
      
        trendingStocksButton.addEventListener("click", function() {
          window.location.href = "/run2";
          $('#loading2').show();
        });
      
        runSpy500Button.addEventListener("click", function() {
          window.location.href = "/run";
          $('#loading3').show();
        });
      
        viewDashboardButton.addEventListener("click", function() {
          window.location.href = "/view";
          $('#loading2').show();
        });
      
        input.addEventListener("keyup", function() {
          this.value = this.value.toUpperCase();
        });
      
        addStockButton.addEventListener("click", function() {
          location.href = `http://{{ ip }}/${input.value}`;
        });
      
        viewStockButton.addEventListener("click", function() {
          location.href = `http://{{ ip }}/stock_data?symbol=${input.value}`;
        });
    </script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(window).on('load', function () {
            $('#loading').hide();
            $('#loading2').hide();
            $('#loading3').hide();
            }) 
        </script>
    {% endblock %}
{% endblock %}

